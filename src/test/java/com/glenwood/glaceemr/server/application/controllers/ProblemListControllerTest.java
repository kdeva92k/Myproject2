package com.glenwood.glaceemr.server.application.controllers;

import static com.jayway.restassured.module.mockmvc.RestAssuredMockMvc.given;
import static org.hamcrest.CoreMatchers.equalTo;

import javax.servlet.http.HttpServletResponse;

import org.apache.log4j.Logger;
import org.junit.Before;
import org.junit.Ignore;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.TestExecutionListeners;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.support.DependencyInjectionTestExecutionListener;
import org.springframework.test.context.support.DirtiesContextTestExecutionListener;
import org.springframework.test.context.transaction.TransactionalTestExecutionListener;
import org.springframework.test.context.web.WebAppConfiguration;
import org.springframework.test.web.servlet.setup.MockMvcBuilders;
import org.springframework.web.context.WebApplicationContext;

import com.github.springtestdbunit.DbUnitTestExecutionListener;
import com.github.springtestdbunit.annotation.DatabaseSetup;
import com.glenwood.glaceemr.server.application.repositories.ProblemListRepository;
import com.jayway.restassured.http.ContentType;
import com.jayway.restassured.module.mockmvc.RestAssuredMockMvc;


@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={"classpath:applicationTestContext.xml"})
@TestExecutionListeners({ DependencyInjectionTestExecutionListener.class,
	DirtiesContextTestExecutionListener.class,
	TransactionalTestExecutionListener.class,
	DbUnitTestExecutionListener.class })
@DatabaseSetup("ReferralData.xml")
@WebAppConfiguration
public class ProblemListControllerTest {
	
	@Autowired
	private WebApplicationContext webApplicationContext;
	
	@Autowired
	ProblemListRepository problemListRepository;
	
	private Logger logger = Logger.getLogger(PlanReferralControllerTest.class);
	
	
	@Before
	public void setUp() {
		 RestAssuredMockMvc.mockMvc = MockMvcBuilders.webAppContextSetup(webApplicationContext).build();
	}
	
	/*
	 * Test case for active problems
	 */
	@Test
	@Ignore
	public void activeProblems() {
		 logger.debug("Fetching active problems- Test");
		
		 given().param("patientId", "7472").
		 		 when().get("/ProblemList/ActiveProblems").then().
	             statusCode(HttpServletResponse.SC_OK).contentType(ContentType.JSON).
	             body(equalTo("[{\"problemListId\":2322,\"problemListPatientId\":7472,\"problemListLastModOn\":\"04/28/2016 19:30 PM IST\",\"problemListDxCode\":\"789.00\",\"problemListIsactive\":true,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":1,\"problemListCreatedon\":\"04/28/2016 19:30 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"ABDOMINAL PAIN, UNSPECIFIED SITE\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.104\"},{\"problemListId\":2333,\"problemListPatientId\":7472,\"problemListLastModOn\":\"05/04/2016 20:15 PM IST\",\"problemListDxCode\":\"A00.0\",\"problemListIsactive\":true,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":1,\"problemListCreatedon\":\"05/04/2016 20:14 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"Cholera due to Vibrio cholerae 01, biovar cholerae\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"A00.0 notes testing\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.90\"},{\"problemListId\":2331,\"problemListPatientId\":7472,\"problemListLastModOn\":\"05/11/2016 08:03 AM IST\",\"problemListDxCode\":\"O33.1\",\"problemListIsactive\":true,\"h555555\":null,\"problemListOnsetDate\":\"2016-05-10\",\"problemListCreatedby\":1,\"problemListCreatedon\":\"05/04/2016 20:02 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"Maternal care for disproportion due to generally contracted pelvis\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"O33.1 dx comments\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.90\"}]"));
	}
	
	/*
	 * Test case for fetching inactive and resolved problems
	 */
	@Test
	@Ignore
	public void inactiveProblems() {
		 logger.debug("Fetching Inactive problems- Test");
		
		 given().param("patientId", "7472").
		 		 when().get("/ProblemList/InactiveProblems").then().
	             statusCode(HttpServletResponse.SC_OK).contentType(ContentType.JSON).
	             body(equalTo("[{\"problemListId\":2055,\"problemListPatientId\":7472,\"problemListLastModOn\":\"10/20/2015 17:54 PM IST\",\"problemListDxCode\":\"110.1\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":49,\"problemListCreatedon\":\"10/20/2015 17:54 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"DERMATOPHYTOSIS OF NAIL\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.104\"},{\"problemListId\":2056,\"problemListPatientId\":7472,\"problemListLastModOn\":\"10/20/2015 17:54 PM IST\",\"problemListDxCode\":\"053.9\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":49,\"problemListCreatedon\":\"10/20/2015 17:54 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"HERPES ZOSTER WITHOUT MENTION OF COMPLICATION\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.104\"},{\"problemListId\":2222,\"problemListPatientId\":7472,\"problemListLastModOn\":\"02/24/2016 13:11 PM IST\",\"problemListDxCode\":\"250.00\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":50,\"problemListCreatedon\":\"02/24/2016 13:11 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"DIABETES MELLITUS WITHOUT MENTION OF COMPLICATION, TYPE II OR UNSPECIFIED TYPE, NOT STATED AS UNCONTROLLED\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.104\"},{\"problemListId\":2219,\"problemListPatientId\":7472,\"problemListLastModOn\":\"02/16/2016 23:01 PM IST\",\"problemListDxCode\":\"A01.2\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":50,\"problemListCreatedon\":\"02/16/2016 23:01 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"Paratyphoid fever B\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.90\"},{\"problemListId\":2218,\"problemListPatientId\":7472,\"problemListLastModOn\":\"02/16/2016 23:01 PM IST\",\"problemListDxCode\":\"A03.9\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":50,\"problemListCreatedon\":\"02/16/2016 23:01 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"Shigellosis, unspecified\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.90\"},{\"problemListId\":2249,\"problemListPatientId\":7472,\"problemListLastModOn\":\"04/05/2016 13:45 PM IST\",\"problemListDxCode\":\"X73.0XXS\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":50,\"problemListCreatedon\":\"04/05/2016 13:45 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"Intentional self-harm by shotgun discharge, sequela\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":50,\"problemListCodingSystem\":\"2.16.840.1.113883.6.90\"},{\"problemListId\":2251,\"problemListPatientId\":7472,\"problemListLastModOn\":\"04/05/2016 13:45 PM IST\",\"problemListDxCode\":\"Z01.411\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":50,\"problemListCreatedon\":\"04/05/2016 13:45 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"Encounter for gynecological examination (general) (routine) with abnormal findings\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":50,\"problemListCodingSystem\":\"2.16.840.1.113883.6.90\"},{\"problemListId\":2252,\"problemListPatientId\":7472,\"problemListLastModOn\":\"04/05/2016 13:45 PM IST\",\"problemListDxCode\":\"Z85.6\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":50,\"problemListCreatedon\":\"04/05/2016 13:45 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"Personal history of leukemia\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":50,\"problemListCodingSystem\":\"2.16.840.1.113883.6.90\"},{\"problemListId\":2253,\"problemListPatientId\":7472,\"problemListLastModOn\":\"04/05/2016 13:45 PM IST\",\"problemListDxCode\":\"Q23.8\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":50,\"problemListCreatedon\":\"04/05/2016 13:45 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"Other congenital malformations of aortic and mitral valves\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":50,\"problemListCodingSystem\":\"2.16.840.1.113883.6.90\"},{\"problemListId\":2254,\"problemListPatientId\":7472,\"problemListLastModOn\":\"04/05/2016 13:46 PM IST\",\"problemListDxCode\":\"C79.89\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":50,\"problemListCreatedon\":\"04/05/2016 13:46 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"Secondary malignant neoplasm of other specified sites\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":50,\"problemListCodingSystem\":\"2.16.840.1.113883.6.90\"},{\"problemListId\":2255,\"problemListPatientId\":7472,\"problemListLastModOn\":\"04/05/2016 13:46 PM IST\",\"problemListDxCode\":\"D49.2\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":50,\"problemListCreatedon\":\"04/05/2016 13:46 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"Neoplasm of unspecified behavior of bone, soft tissue, and skin\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":50,\"problemListCodingSystem\":\"2.16.840.1.113883.6.90\"},{\"problemListId\":2250,\"problemListPatientId\":7472,\"problemListLastModOn\":\"04/05/2016 13:45 PM IST\",\"problemListDxCode\":\"I50.43\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":50,\"problemListCreatedon\":\"04/05/2016 13:45 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"Acute on chronic combined systolic (congestive) and diastolic (congestive) heart failure\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.90\"},{\"problemListId\":2248,\"problemListPatientId\":7472,\"problemListLastModOn\":\"04/05/2016 13:45 PM IST\",\"problemListDxCode\":\"X73.0XXA\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":50,\"problemListCreatedon\":\"04/05/2016 13:45 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"Intentional self-harm by shotgun discharge, initial encounter\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.90\"},{\"problemListId\":2245,\"problemListPatientId\":7472,\"problemListLastModOn\":\"04/02/2016 14:53 PM IST\",\"problemListDxCode\":\"J45.41\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":50,\"problemListCreatedon\":\"04/02/2016 14:53 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"Moderate persistent asthma with (acute) exacerbation\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.90\"},{\"problemListId\":2244,\"problemListPatientId\":7472,\"problemListLastModOn\":\"04/02/2016 14:53 PM IST\",\"problemListDxCode\":\"E10.40\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":50,\"problemListCreatedon\":\"04/02/2016 14:53 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"Type 1 diabetes mellitus with diabetic neuropathy, unspecified\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.90\"},{\"problemListId\":2256,\"problemListPatientId\":7472,\"problemListLastModOn\":\"04/05/2016 13:46 PM IST\",\"problemListDxCode\":\"D48.2\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":50,\"problemListCreatedon\":\"04/05/2016 13:46 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"Neoplasm of uncertain behavior of peripheral nerves and autonomic nervous system\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":50,\"problemListCodingSystem\":\"2.16.840.1.113883.6.90\"},{\"problemListId\":2291,\"problemListPatientId\":7472,\"problemListLastModOn\":\"04/19/2016 12:12 PM IST\",\"problemListDxCode\":\"112.0\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":1,\"problemListCreatedon\":\"04/19/2016 12:12 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"CANDIDIASIS OF MOUTH\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.104\"},{\"problemListId\":2290,\"problemListPatientId\":7472,\"problemListLastModOn\":\"04/19/2016 12:12 PM IST\",\"problemListDxCode\":\"112.0\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":1,\"problemListCreatedon\":\"04/19/2016 12:12 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"CANDIDIASIS OF MOUTH\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.104\"},{\"problemListId\":2292,\"problemListPatientId\":7472,\"problemListLastModOn\":\"04/19/2016 12:12 PM IST\",\"problemListDxCode\":\"009.1\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":1,\"problemListCreatedon\":\"04/19/2016 12:12 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"COLITIS, ENTERITIS, AND GASTROENTERITIS OF PRESUMED INFECTIOUS ORIGIN\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.104\"},{\"problemListId\":2289,\"problemListPatientId\":7472,\"problemListLastModOn\":\"04/19/2016 12:13 PM IST\",\"problemListDxCode\":\"009.1\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":1,\"problemListCreatedon\":\"04/19/2016 12:12 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"COLITIS, ENTERITIS, AND GASTROENTERITIS OF PRESUMED INFECTIOUS ORIGIN\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.104\"},{\"problemListId\":2288,\"problemListPatientId\":7472,\"problemListLastModOn\":\"04/19/2016 12:13 PM IST\",\"problemListDxCode\":\"112.0\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":1,\"problemListCreatedon\":\"04/19/2016 12:12 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"CANDIDIASIS OF MOUTH\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.104\"},{\"problemListId\":2293,\"problemListPatientId\":7472,\"problemListLastModOn\":\"04/19/2016 12:12 PM IST\",\"problemListDxCode\":\"009.1\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":1,\"problemListCreatedon\":\"04/19/2016 12:12 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"COLITIS, ENTERITIS, AND GASTROENTERITIS OF PRESUMED INFECTIOUS ORIGIN\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.104\"},{\"problemListId\":2320,\"problemListPatientId\":7472,\"problemListLastModOn\":\"04/27/2016 09:12 AM IST\",\"problemListDxCode\":\"441.4\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":1,\"problemListCreatedon\":\"04/27/2016 09:12 AM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"ABDOMINAL ANEURYSM WITHOUT MENTION OF RUPTURE\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.104\"},{\"problemListId\":2316,\"problemListPatientId\":7472,\"problemListLastModOn\":\"04/27/2016 09:12 AM IST\",\"problemListDxCode\":\"441.4\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":1,\"problemListCreatedon\":\"04/27/2016 09:12 AM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"ABDOMINAL ANEURYSM WITHOUT MENTION OF RUPTURE\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.104\"},{\"problemListId\":2317,\"problemListPatientId\":7472,\"problemListLastModOn\":\"04/27/2016 09:12 AM IST\",\"problemListDxCode\":\"441.4\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":1,\"problemListCreatedon\":\"04/27/2016 09:12 AM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"ABDOMINAL ANEURYSM WITHOUT MENTION OF RUPTURE\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.104\"},{\"problemListId\":2318,\"problemListPatientId\":7472,\"problemListLastModOn\":\"04/27/2016 09:12 AM IST\",\"problemListDxCode\":\"441.4\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":1,\"problemListCreatedon\":\"04/27/2016 09:12 AM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"ABDOMINAL ANEURYSM WITHOUT MENTION OF RUPTURE\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.104\"},{\"problemListId\":2332,\"problemListPatientId\":7472,\"problemListLastModOn\":\"05/04/2016 20:05 PM IST\",\"problemListDxCode\":\"B97.89\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":1,\"problemListCreatedon\":\"05/04/2016 20:05 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"Other viral agents as the cause of diseases classified elsewhere\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.90\"},{\"problemListId\":2330,\"problemListPatientId\":7472,\"problemListLastModOn\":\"05/04/2016 17:07 PM IST\",\"problemListDxCode\":\"A02.1\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":1,\"problemListCreatedon\":\"05/04/2016 17:06 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"Salmonella sepsis\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"A02.1 comments\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.90\"},{\"problemListId\":2319,\"problemListPatientId\":7472,\"problemListLastModOn\":\"05/04/2016 16:58 PM IST\",\"problemListDxCode\":\"441.4\",\"problemListIsactive\":false,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":1,\"problemListCreatedon\":\"04/27/2016 09:12 AM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"ABDOMINAL ANEURYSM WITHOUT MENTION OF RUPTURE\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.104\"}]"));
	}
	
	/*
	 * Test case for fetching edit page data
	 */
	@Test
	@Ignore
	public void loadEditData() {
		 logger.debug("Fetching Inactive problems- Test");
		
		 given().param("patientId", "7472").param("problemId","2333").
		 		 when().get("/ProblemList/EditFetch").then().
	             statusCode(HttpServletResponse.SC_OK).contentType(ContentType.JSON).
	             body(equalTo("[{\"problemListId\":2333,\"problemListPatientId\":7472,\"problemListLastModOn\":\"05/04/2016 20:15 PM IST\",\"problemListDxCode\":\"A00.0\",\"problemListIsactive\":true,\"h555555\":null,\"problemListOnsetDate\":null,\"problemListCreatedby\":1,\"problemListCreatedon\":\"05/04/2016 20:14 PM IST\",\"problemListUnknown2\":null,\"problemListUnknown1\":null,\"problemListIschronic\":null,\"problemListResolvedDate\":null,\"problemListResolvedBy\":null,\"problemListDxDescp\":\"Cholera due to Vibrio cholerae 01, biovar cholerae\",\"h063015\":-1,\"problemListChronicity\":-1,\"problemListIsresolved\":false,\"problemListComments\":\"A00.0 notes testing\",\"problemListInactiveDate\":null,\"problemListInactivatedBy\":null,\"problemListCodingSystem\":\"2.16.840.1.113883.6.90\"}]"));
	}
	
	/*
	 * Test case for deleting a problem from problem list
	 */
	@Test
	@Ignore
	public void deleteDxData() {
		 logger.debug("Fetching Inactive problems- Test");
		
		 given().param("patientId", "7472").param("deleteData","%7B%22ProblemIdArr%22%3A%5B%222331%2C%22%5D%7D").
		 		 when().get("/ProblemList/DeleteSave").then().
	             statusCode(HttpServletResponse.SC_OK).contentType(ContentType.JSON).
	             body(equalTo("deleted"));
	}
	
	

}
